<!DOCTYPE html>
<html>
<head>
    <meta charset = "ISO-8859-1" />
    <link th:href="@{/styles/index.css}" rel = "stylesheet"/>
    <title>Employees</title>
</head>
<body>
<div class="mainBody">
    <h4>Employee's Exercice</h4>
    <div class="firstPart">
        <a class="goCreate" href="http://localhost:8080/form">Create an employee</a>
        <a class="goCreate" th:href="@{/index/exportCsv}" download="employees.csv">Export as CSV</a>
    </div>
    <form th:action="@{/index}" method="get">
        <label th:text="FirstName"/>
        <input type="text" name="name" class="search"/> <br>

        <label th:text="LastName"/>
        <input type="text" name="lastName" class="search"/> <br>

        <label for="sex">Choose a gender :</label>
        <select id="sex" name="gender">
            <option value="">All</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select> <br>

        <label th:text="Role"/>
        <input type="text" name="role" class="search"/> <br>

        <label th:text="EmployementDate"/>
        <input type="date" name="employementDate" class="search"/> <br>

        <label th:text="DepartureDate"/>
        <input type="date" name="departureDate" class="search"/> <br>

        <button type="submit" class="btnSearch">Filter</button>
    </form>
    <table>
        <thead>
        <tr>
            <th>
                <a th:href="@{|/index?sort=firstNameDesc|}" th:text="FirstNameAsc"></a>
                <a th:href="@{|/index?sort=firstNameAsc|}" th:text="FirstNameDesc"></a>
            </th>
            <th>
                <a th:href="@{|/index?sort=lastNameAsc|}" th:text="lastNameAsc"></a>
                <a th:href="@{|/index?sort=lastNameDesc|}" th:text="lastNameDesc"></a>
            </th>
            <th>Birth Date</th>
            <th>Matricule</th>
            <th>
                <a th:href="@{|/index?sort=genderAsc|}" th:text="GenderAsc"></a>
                <a th:href="@{|/index?sort=genderDesc|}" th:text="GenderDesc"></a>
            </th>
            <th>Csp</th>
            <th>Address</th>
            <th>Email Professionel</th>
            <th>Email Personnel</th>
            <th>
                <a th:href="@{|/index?sort=roleAsc|}" th:text="roleAsc"></a>
                <a th:href="@{|/index?sort=roleDesc|}" th:text="roleDesc"></a>
            </th>
            <th>Nombre d'Enfants</th>
            <th>
                <a th:href="@{|/index?sort=dDateAsc|}" th:text="dDateAsc"></a>
                <a th:href="@{|/index?sort=dDateDesc|}" th:text="dDateDesc"></a>
            </th>
            <th>
                <a th:href="@{|/index?sort=eDateAsc|}" th:text="eDateAsc"></a>
                <a th:href="@{|/index?sort=eDateDesc|}" th:text="eDateDesc"></a>
            </th>
            <th>Cnaps</th>
            <th>Phone Number</th>
            <th>CIN</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
            <tr th:each="employee: ${employees}">
                <td th:text="${employee.firstName}" />
                <td th:text="${employee.lastName}" />
                <td th:text="${employee.birthDate}" />
                <td th:text="${employee.matricule}" />
                <td th:text="${employee.sex}" />
                <td th:text="${employee.csp}" />
                <td th:text="${employee.address}" />
                <td th:text="${employee.emailPro}" />
                <td th:text="${employee.emailPerso}" />
                <td th:text="${employee.role}" />
                <td th:text="${employee.child}" />
                <td th:text="${employee.employementDate}" />
                <td th:text="${employee.departureDate}" />
                <td th:text="${employee.cnaps}" />
                <td>
                    <ul>
                        <li th:each="test : ${employee.phones}" th:text="${test.phoneNumber}"></li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li th:text="${employee.cin.cinNumber}"></li>
                        <li th:text="${employee.cin.issueDate}"></li>
                        <li th:text="${employee.cin.issueLocation}"></li>
                    </ul>
                </td>
                <td>
                    <a th:href="@{/formEmployee/{matricule}(matricule=${employee.matricule})}" class="cheking">Check</a>
                    <button class="deleting">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</body>
</html>